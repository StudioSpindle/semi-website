#!/usr/bin/env bash
set -e # halt script on error

# build html
if [ -z "$BASE_URL" ]; then
    JEKYLL_ENV=develop bundle exec jekyll build
else
    JEKYLL_ENV=develop bundle exec jekyll build --baseurl "$BASE_URL"
fi

# test html
bundle exec htmlproofer ./_site --internal-domains www.semi.technology --allow-hash-href --url-ignore "https://codepen.io" --empty-alt-ignore --assume-extension
